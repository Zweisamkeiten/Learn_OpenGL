# 光照贴图

给每个物体自己独特的材质从而对光照作出不同反映的方法。

但是这样仍不能对一个物体的视觉输出提供足够多的灵活性

现实中的物体通常有很多种材质组成。

因此需要引入， `漫反射` 和`镜面光` 贴图。这样可以对物体的漫反射分量(以及间接地对环境光分量) 和镜面光分量有更加精确的控制

## 漫反射贴图

通过漫反射贴图来为物体的每个片段设置漫反射颜色。

基本上等同于之前的纹理。使用一张覆盖物体的图像，能够逐片段索引其独立的颜色值。在光照场景中，它通常叫做一个漫反射贴图(Diffuse Map)

在着色器中使用漫反射贴图的方法与纹理相同，这次会将纹理储存为Material结构体中的一个sampler2D 将之前定义的vec3漫反射颜色向量替换为 漫反射贴图

> sampler2D是所谓不透明类型 不能将它实例化 只能通过uniform来定义它
> 如果使用uniform以外的方法(如函数的参数)实例化这个结构体 GLSL会抛出一些奇怪的错误 这同样适用于任何封装了不透明类型的结构体

同时移除环境光材质颜色向量  因为环境光颜色几乎所有情况下都等于漫反射颜色 因此不需要将它们分开储存

## 镜面光贴图

就单单漫反射贴图下 镜面高光有些奇怪 木头不应该有这么强的镜面高光

因此可以将物体的镜面光材质设置为vec3(0.0)来解决这个问题。但这也意味着箱子的钢制边框将不能够显示镜面高光了。
但是钢铁是应该有镜面高光的。
所以如果要让物体的某些部分以不同的强度显示镜面高光 就需要使用一个专门用于镜面高光的纹理贴图

这意味着需要生成一个黑白的(也可以为彩色的)纹理 来定义物体每部分的镜面光强度

镜面高光的强度可以通过每个像素的亮度来获取 镜面光贴图上的每个像素都可以由一个颜色向量来表示 黑色代表颜色向量vec3(0.0)，灰色代表颜色向量vec3(0.5).

在片段着色器中，取样对应的颜色值将其乘以光源的镜面强度 一个像素越白 乘积就会越大 物体的镜面光分量就会越亮

箱子大部分由木头组成，木头材质没有镜面高光 所以镜面光贴图的整个木头部分为黑色。箱子的钢制边框的镜面光强度 有细微变化。 有钢铁本身与裂缝锈迹的差别

实际上，木头也有镜面高光，因为反光度很小(更多的光被散射)，所以影响较小

使用photoshop或gimp，将漫反射纹理转换为镜面光纹理比较容易，只需剪切一部分 ，将图片转换为黑白，并增加亮度/对比度

### 采样镜面光贴图

代码类似与加载纹理图像
